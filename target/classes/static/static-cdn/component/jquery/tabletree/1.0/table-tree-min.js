(function($){$.fn.tabletree=function(D){var A=$(this),_=$.extend({},$.fn.tabletree.defaults,D);B();function B(){A.find(".tree-hit").click(function(B,D){var A=$(this),_=A.attr("id").split("_")[1],E="tr_"+_;if(A.hasClass("tree-expanded")){A.removeClass("tree-expanded").addClass("tree-collapsed").next().removeClass("tree-folder-open");$("tr[id^='"+E+"']").each(function(){var _=$(this);if(_.attr("id")!=E){_.hide();_.find(".tree-hit").removeClass("tree-expanded").addClass("tree-collapsed").next().removeClass("tree-folder-open")}})}else{A.removeClass("tree-collapsed").addClass("tree-expanded").next().addClass("tree-folder-open");C(_,D)}});A.find("tr").not(".title").hover(function(){$(this).addClass("trover")},function(){$(this).removeClass("trover")}).each(function(){var B=$(this),A=B.attr("id").split("_")[1],C=A.length/4;if(C==1){B.show();if(_.onInitShow=="expanded")B.find(".tree-hit").trigger("click",true)}});if(_.onInitShow!="ROOT"&&_.onInitShow!="expanded"){var B=_.onInitShow;$("#tree_"+B).find(".tree-title").addClass("tree-title-star");var D=B.length/4;for(var E=1;E<D;E++)$("#hit_"+B.substring(0,E*4)).trigger("click",false)}}function C(_,A){var B="tr_"+_;$("tr[id^='"+B+"']").each(function(){var G=$(this),D=G.attr("id"),F=D.split("_")[1];if(D!=B&&(F.length/4)-(_.length/4)==1){G.show();var E=G.find(".tree-hit");if(E.hasClass("tree-collapsed"))if(A){E.removeClass("tree-collapsed").addClass("tree-expanded").next().addClass("tree-folder-open");C(F,A)}}})}};$.fn.tabletree.defaults={onInitShow:"ROOT"}})(jQuery)